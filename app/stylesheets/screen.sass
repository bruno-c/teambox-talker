// Theme Colours
!accent_colour = #269ED6
!alt_colour = #E5952B
!button_colour_off = #269ED6
!button_colour_on = #228DBF
!alt_button_colour_off = #E5952B
!alt_button_colour_on = #E5952B

// Monochrome Colours
!white = #FFFFFF
!light_grey = #C0C0C0
!grey = #808080
!dark_grey = #404040
!black = #000000

// Basic Colours
!yellow = #FFFF00
!red = #FF0000
!green = #00FF00
!blue = #0000FF

// Other Colours
!colour_negative = !accent_colour * 0.5 + !red * 0.5
!colour_positive = !accent_colour * 0.5 + !green * 0.5
!colour_exclamation = !accent_colour * 0.1 + !yellow * 0.9

// Rounded Corners
=rounded_corners(!corner, !radius)
  @if !corner == "all"
    border-radius = !radius + "px"
    -moz-border-radius = !radius + "px"
    -webkit-border-radius = !radius + "px"
  @if !corner == "top_right"
    border-top-right-radius = !radius + "px"
    -moz-border-radius-topright = !radius + "px"
    -webkit-border-top-right-radius = !radius + "px"
  @if !corner == "bottom_right"
    border-bottom-right-radius = !radius + "px"
    -moz-border-radius-bottomright = !radius + "px"
    -webkit-border-bottom-right-radius = !radius + "px"
  @if !corner == "bottom_left"
    border-bottom-left-radius = !radius + "px"
    -moz-border-radius-bottomleft = !radius + "px"
    -webkit-border-bottom-left-radius = !radius + "px"
  @if !corner == "top_left"
    border-top-left-radius = !radius + "px"
    -moz-border-radius-topleft = !radius + "px"
    -webkit-border-top-left-radius = !radius + "px"
  @if !corner == "top"
    +rounded_corners("top_left", !radius)
    +rounded_corners("top_right", !radius)
  @if !corner == "right"
    +rounded_corners("top_right", !radius)
    +rounded_corners("bottom_right", !radius)
  @if !corner == "bottom"
    +rounded_corners("bottom_right", !radius)
    +rounded_corners("bottom_left", !radius)
  @if !corner == "left"
    +rounded_corners("bottom_left", !radius)
    +rounded_corners("top_left", !radius)

// Opacity
=opacity(!opacity)
  filter = "alpha(opacity=" + !opacity + ")"
  opacity = !opacity / 100
  -moz-opacity = !opacity / 100

// Box Shadows
=box_shadow(!distance_x, !distance_y, !size, !colour)
  box-shadow = !distance_x + "px" !distance_y + "px" !size + "px" !colour
  -webkit-box-shadow = !distance_x + "px" !distance_y + "px" !size + "px" !colour
  -moz-box-shadow = !distance_x + "px" !distance_y + "px" !size + "px" !colour

// Text Shadows
=text_shadow(!distance_x, !distance_y, !size, !colour)
  text-shadow = !distance_x + "px" !distance_y + "px" !size + "px" !colour

=emboss(!color)
  border:
    top-color = !color * 0.5 + !white * 0.5
    left-color = !color * 0.5 + !white * 0.5
    bottom-color = !color
    right-color = !color

// Font Sizes
=font_size(!size)
  !font_size_medium = 14px
  @if !size == "medium"
    font-size = !font_size_medium
  @if !size == "tiny"
    font-size = !font_size_medium - 4px
  @if !size == "small"
    font-size = !font_size_medium - 2px
  @if !size == "large"
    font-size = !font_size_medium + 2px
  @if !size == "xlarge"
    font-size = !font_size_medium + 4px
  @if !size == "xxlarge"
    font-size = !font_size_medium + 6px
  @if !size == "xxxlarge"
    font-size = !font_size_medium + 8px

// General
body
  height: 100%
  position: relative
  font-family: helvetica, arial, sans-serif
  +font_size("medium")
  background = !black * 0.1 + !white * 0.9
  color = !black
*
  text-shadow: rgba(0, 0, 0, 0.01) 0 0 0
a
  color = !accent_colour * 0.75 + !black * 0.25
  outline: none
  &.negative
    color = !colour_negative
  &.disabled
    color: !grey
    text-decoration: none
    cursor: default
  &:hover
    text-decoration: none
h2
  +font_size("xxxlarge")
  margin: 0 0 1em
  font-weight: bold
h3
  +font_size("xxlarge")
  margin: 0 0 0.66em
  font-weight: bold
h4
  +font_size("xlarge")
  font-weight: bold
  margin: 0 0 0.5em
p
  color = !dark_grey
  &.more
    margin: 0 0 10px
  &.pagination
    overflow: hidden
    a
      font-weight: bold
      text-decoration: none
      display: block
      padding: 0 10px
      height: 22px
      line-height: 22px
      +rounded_corners("all", 3)
      border = 1px "solid" !light_grey * 0.25 + !white * 0.75
      border-right = 1px "solid" !light_grey * 0.5 + !white * 0.5
      border-bottom = 1px "solid" !light_grey * 0.5 + !white * 0.5
      &:hover
        background = !accent_colour * 0.5 + !white * 0.5
      b
        display: block
      &.previous
        float: left
        b
          float: left
          border: 5px solid transparent
          border-left: none
          border-right = 8px "solid" !light_grey
          margin: 5px 5px 0 0
      &.next
        float: right
        b
          float: right
          border: 5px solid transparent
          border-right: none
          border-left = 8px "solid" !light_grey
          margin: 5px 0 0 5px
input, select, textarea
  font-family: helvetica, arial, sans-serif
  +font_size("small")
em
  font-style: oblique
hr
  height: 0
  border: none
  border-top = 1px "solid" !light_grey
  margin: 0 0 1.5em

// Clearfix
.clearfix
  display: inline-block
  &:after
    content: "."
    display: block
    clear: both
    visibility: hidden
    line-height: 0
    height: 0
html[xmlns] .clearfix
  display: block
* html .clearfix
  height: 1%

#nav
  position: fixed
  z-index: 3
  width: auto
  left: 0
  right: 0
  overflow: hidden
  background = !dark_grey
  padding: 0 10px 0
  +font_size("small")
  height: 40px
  border-bottom = 2px solid !light_grey
  ul
    margin: 10px 0 0
    float: left
    overflow: hidden
    li
      list-style: none
      display: block
      float: left
      a
        display: block
        line-height: 20px
        padding: 0 5px
        height: 20px
        font-weight: bold
        text-decoration: none
        color = !white
        &:hover
          background = !white
          +rounded_corners("all", 3)
          color = !accent_colour
  p.utilities
    float: right
    color = !light_grey
    line-height: 40px
    a
      color = !white
      &.avatar
        display: inline-block
        height: 16px
        width: 16px
        img
          height: 100%
          width: 100%
          position: relative
          top: -3px

// Layout
#content
  padding: 40px 0 0 0
#main
  margin: 0 240px 0 0
  padding: 40px
#sidebar
  position: fixed
  right: 0
  float: right
  width: 200px
  padding: 40px 40px 40px 0

// Rooms
#rooms
  overflow: hidden
  li
    display: block
    width: 280px
    margin: 0 10px 10px 0
    float: left
    div.panel
      div
        &.content
          min-height: 40px
          p
            &.people
              label
                color = !grey
              img
                height: 16px
                width: 16px
                position: relative
                top: 3px

// Form Elements
form
  p
    line-height: 28px
    padding: 2px 0
    &.submit
      margin-bottom: 0
  div.complex_field
    line-height: 28px
    margin: 0 0 1.5em
  label
    display: block
    margin-right: 10px
    line-height: 20px
    font-weight: bold
    &.description
      line-height: 1
      margin-top: 5px
      +font_size("small")
      float: none
      text-align: left
    &.inline
      display: inline
      float: none
      font-weight: normal
  input, textarea, select
    +font_size("medium")
    
  &.lw40
    label
      width: 40px
      &.description
        width: auto
        margin-left: 50px
    p.indent
      margin-left: 50px
  &.lw80
    label
      width: 80px
      &.description
        width: auto
        margin-left: 90px
    p.indent
      margin-left: 90px
  &.lw120
    label
      width: 120px
      &.description
        width: auto
        margin-left: 130px
    p.indent
      margin-left: 130px
  &.lw160
    label
      width: 160px
      &.description
        width: auto
        margin-left: 170px
    p.indent
      margin-left: 170px

// Buttons
a.button
  display: inline-block
  +rounded_corners("all", 11)
  background = !button_colour_off
  color = !white
  +text_shadow(-1, -1, 0, !accent_colour * 0.75 + !black * 0.25)
  border = 1px "solid"
  +emboss(!accent_colour * 0.75 + !black * 0.25)
  text-decoration: none
  padding: 0 10px
  line-height: 27px
  +font_size("large")
  height: 26px
  +box_shadow(2, 2, 4, !light_grey)
  margin: 0 4px
  &:hover
    background = !button_colour_on
  &.large
    +font_size("xlarge")
    line-height = 31px
    height: 29px
  &.small
    +font_size("small")
    line-height = 20px
    height: 20px
  &.negative
    background = !colour_negative
    +emboss(!colour_negative * 0.75 + !black * 0.25)
    +text_shadow(-1, -1, 0, !colour_negative * 0.75 + !black * 0.25)
    +opacity(80)
    &:hover
      +opacity(100)
  &.neutral, &.submit
    background = !light_grey * 0.2 + !white * 0.8
    +emboss(!grey)
    +text_shadow(1, 1, 0, !light_grey)
    color = !black
    +opacity(80)
    &:hover
      +opacity(100)
  &.add
    background-image: url('../../images/icons/plus-circle.png')
    background-position: 10px center
    background-repeat: no-repeat
    padding-left: 31px
  &.remove
    background-image: url('../../images/icons/minus-circle.png')
    background-position: 10px center
    background-repeat: no-repeat
    padding-left: 31px
  &.update
    background-image: url('../../images/icons/document--pencil.png')
    background-position: 10px center
    background-repeat: no-repeat
    padding-left: 31px
  &.icon
    background-position: 10px center
    background-repeat: no-repeat
    padding-left: 31px
  &.send-email
    background-image: url(/images/icons/mail--arrow.png)
  &.delete, &.cancel
    background-image: url(/images/icons/cross-circle.png)
  &.ok
    background-image: url(/images/icons/tick.png)

// Sidebar Action Buttons
#sidebar
  #actions
    a.button
      +font_size("xlarge")
      font-weight: bold
      line-height: 1
      height: auto
      padding: 10px 15px 10px 36px
      background-position: 15px center

// People
#people
  overflow: hidden
  li.user
    display: block
    width: 280px
    margin: 0 10px 10px 0
    float: left
    &.pending
      div.header
        :background-color = !grey
        .tag.pending
          :background-color = !light_grey
    ul.roles
      :list-style none
    div.panel
      div
        &.header
          div.avatar
            position: absolute
            top: 10px
            left: 10px
            img
              height: 40px
              width: 40px
          h3
            margin: 0 0 0 50px
        &.content
          min-height: 40px
          padding: 8px 10px 9px 60px
          +rounded_corners("bottom", 3)

// Chat Log
#top_mask
  position: fixed
  z-index: 2
  top: 0
  left: 0
  height: 80px
  overflow: hidden
  width: 100%
  margin: 0 240px 0 0
  div.fade
    height: 40px
    background = !black * 0.1 + !white * 0.9
    +box_shadow(0, 20, 20, !black * 0.1 + !white * 0.9)
#chat_log
  background = !white
  padding: 10px 10px 0
  margin: 0 0 60px 0
  +box_shadow(2, 2, 2, !light_grey * 0.66 + !white * 0.33)
  border-right = 1px solid !light_grey
  border-bottom = 1px solid !light_grey
  table
    width: 100%
    tr
      td
        +font_size("small")
        img.avatar
          height: 16px
          width: 16px
          position: relative
          top: 3px
        &.author
          padding: 0 0 15px 0
          vertical-align: bottom
          white-space: nowrap
          text-align: right
          width: 1%
          b.blockquote_tail
            display: inline-block
            width: 0
            height: 0
            border: 5px solid transparent
            border-left: none
            border-right = 5px solid !accent_colour * 0.15 + !white * 0.85
        &.message
          padding: 0 0 10px 0
          blockquote
            +rounded_corners("all", 3)
            background = !accent_colour * 0.15 + !white * 0.85
            font-style: normal
            padding: 3px 10px
            overflow: hidden
            p
              margin: 2px 0
      &.me
        td
          &.author
            b.blockquote_tail
              border-right = 5px solid !alt_colour * 0.15 + !white * 0.85
          &.message
            blockquote
              background = !alt_colour * 0.15 + !white * 0.85
      &.datetime
        td
          &.author
            b.blockquote_tail
              border-right = 5px solid !light_grey * 0.15 + !white * 0.85
          &.message
            blockquote
              background = !light_grey * 0.15 + !white * 0.85
              padding: 5px 10px
              color = !grey 
      &.notice
        td
          &.author
            b.blockquote_tail
              border-right = 5px solid !colour_exclamation * 0.25 + !white * 0.75
          &.message
            blockquote
              background = !colour_exclamation * 0.25 + !white * 0.75
              padding: 5px 10px
              color = !light_grey
              img.avatar
                float: left
                margin: 0 4px 0 0
                top: 1px
              strong
                color = !black
                font-weight: normal

#message_form
  position: fixed
  z-index: 2
  bottom: 0
  left: 0
  height: 100px
  overflow: hidden
  width: 100%
  form.fade
    height: 80px
    margin: 20px 260px 0 0
    padding: 0 0 0 50px
    background = !black * 0.1 + !white * 0.9
    +box_shadow(0, -10, 10, !black * 0.1 + !white * 0.9)
    textarea
      height: 50px
      width: 95%
      padding: 5px
      border = 1px solid !light_grey

// Panel
div.panel
  margin: 0 0 20px
  +box_shadow(0, 0, 2, !light_grey)
  div
    &.header
      +rounded_corners("top", 3)
      background = !dark_grey
      padding: 5px 10px 4px
      border-bottom = 1px solid !light_grey
      position: relative
      span.actions
        float: right
        +font_size("small")
        a
          color = !light_grey
          &:hover
            color = !white
      h3
        margin: 0
        color = !white
        a
          color: inherit
    &.content
      background = !white
      padding: 8px 10px 9px
      border-top = 2px solid !light_grey * 0.1 + !white * 0.9
      border-bottom = 1px solid !light_grey * 0.33 + !white * 0.66
      p
        margin: 0 0 0.66em
    &.footer
      text-align: right
      +font_size("small")
      padding: 3px 10px 5px
      +rounded_corners("bottom", 3)
      border-top = 2px solid !light_grey * 0.2 + !white * 0.8
      background = !light_grey * 0.1 + !white * 0.9
  .tag
    +font_size("small")
    :background-color = !alt_colour
    :color = !white
    :padding 2px 4px
    :position relative
    :top 5px
    +rounded_corners("all", 3)

// Room Sidebar
#sidebar
  #room
    div
      &.content
        ul.people
          li
            display: block
            margin: 0 0 5px
            padding: 2px 5px
            background = !light_grey * 0.15 + !white * 0.85
            +rounded_corners("all", 3)
            img
              height: 16px
              width: 16px
              position: relative
              top: 3px

// Flash
div.flash
  padding: 10px 16px
  margin-bottom: 10px
  border: 2px solid
  border-left-width: 10px
  +rounded_corners("right", 5)
#flash_error
  border-color = !red * 0.7
  color = !red * 0.5
  background-color = !red * 0.1 + !white * 0.9
#flash_notice
  border-color = !green * 0.5
  color = !green * 0.3
  background-color = !green * 0.1 + !white * 0.9
