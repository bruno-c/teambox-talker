<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title><%= strip_tags @title || "Home" %> &#171; TalkerApp</title>
  <%= stylesheet_link_tag "reset.css", "screen.css", :media => "screen, projection" %>
  <%= stylesheet_link_tag "print.css", :media => "print" %>
  <!--[if IE]><%= stylesheet_link_tag "ie.css", :media => "screen, projection" %><![endif]-->
  <%= javascript_include_tag "jquery", "jquery-ui", "jrails", "application", :cache => true %>
  <%= javascript_include_tag "uuid", "json", "orbited", "line_protocol", "format_helper", "talker/client", "talker/chat_room", :cache => "chat_all" %>
  <%= yield :head %>
</head>

<body id="<%= @controller.controller_name %>_controller" class="<%= @template.instance_variable_get(:@_first_render).name %>">

  <%= render :partial => "shared/nav" %>

  <div id="content">
    <div id="sidebar">
      <%= yield :sidebar %>
    </div>
    <div id="main">
      <%- flash.each do |name, message| -%>
        <%= content_tag :p, message, :id => "flash_#{name}", :class => "flash #{name}" %>
      <%- end -%>
      <%= yield %>
    </div>
  </div>

</body>
</html>


<!DOCTYPE html>
%html
  %head
    %title&= @title
    = stylesheet_link_tag 'screen.css', :media => 'screen, projection'
    = stylesheet_link_tag 'print.css', :media => 'print'
    /[if IE]
      = stylesheet_link_tag 'ie.css', :media => 'screen, projection'
    = javascript_include_tag :defaults, :cache => true
    = javascript_include_tag "uuid", "json", "orbited", "line_protocol", "format_helper", "talker/client", "talker/chat_room", :cache => "chat_all"
    = yield :head

    - if logged_in?
      :javascript
        var currentUser = {
          id: #{current_user.id},
          name: #{current_user.name.to_json},
          email: #{current_user.email.to_json},
        };
  
  %body.container#room
    #header
      = link_to "&larr; Back to Rooms", rooms_path, :class => "back"
      = link_to "Chat Logs", logs_path(@room), :target => "_blank"
      = link_to "Today's Log", today_log_path(@room), :target => "_blank"
    
    #content
      = yield
