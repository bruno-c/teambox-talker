<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title><%= strip_tags @title || "Home" %> &#171; TalkerApp</title>
  <%= stylesheet_link_tag "reset.css", "compiled/screen.css", :media => "screen, projection" %>
  <%= stylesheet_link_tag "compiled/print.css", :media => "print" %>
  <!--[if IE]><%= stylesheet_link_tag "compiled/ie.css", :media => "screen, projection" %><![endif]-->
  <%= javascript_include_tag "jquery", "jquery-ui", "jrails", "jquery.form", "jquery.livequery", "jquery.uniform", "jquery.cycle", "jquery.autocomplete", "application", :cache => true %>
  <%= yield :head %>
</head>

<body id="<%= @controller.controller_name %>_controller" class="<%= @template.instance_variable_get(:@_first_render).name %>">

  <%#= render :partial => "shared/nav_in_room" %>
  <%= render :partial => "shared/nav" %>

  <div id="content">
    <div id="sidebar">
      <%= yield :sidebar %>
    </div>
    <div id="main">
      <%- flash.each do |name, message| -%>
        <%= content_tag :p, message, :id => "flash_#{name}", :class => "flash #{name}" %>
      <%- end -%>
      <%= yield %>
    </div>
  </div>

</body>
</html>
%html
  %head
    %title
      &= @title
      &mdash;
      Talker
    = stylesheet_link_tag 'screen.css', :media => 'screen, projection'
    = stylesheet_link_tag 'print.css', :media => 'print'
    /[if IE]
      = stylesheet_link_tag 'ie.css', :media => 'screen, projection'
    = javascript_include_tag :defaults, :cache => true
    = yield :head
  
  %body
    #header
      .inner
        - if logged_in?
          = link_to 'Rooms', rooms_path
          - if admin?
            = link_to 'New Room', new_room_path
            = link_to 'Manage Users', users_path
          = link_to 'My Settings', settings_path
        
          = "Hi #{current_user.name},"
          = link_to 'Log Out', logout_path

        - else
          = link_to 'Log In', login_path
          = link_to 'Sign Up', signup_path
  
    #content
      .inner
        - if flash[:notice]
          %p.notice= flash[:notice]

        - if flash[:error]
          %p.error= flash[:error]

        = yield
  