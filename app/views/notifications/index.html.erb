<div class="sheet">
  <h2><%= @title = "Notifications" %></h2>
  
  <div class="info">
    You can send a notification to a room each time a feed is updated.
    Simply add the URL to the Atom or RSS feed and specify to which room the
    notification should go.
  </div>
  
  <table id="notifications">
  <% @notifications.each do |notification| %>
    <tr>
      <td>
        <%= image_tag "icons/feed.png" %>
        <%= link_to truncate(h(notification.url), :length => 60), notification.url, :title => h(notification.url) %>
        <% if notification.failed? %>
          <span class="error">Error: <%=h notification.last_error %> <%= link_to "(?)", "http://en.wikipedia.org/wiki/List_of_HTTP_status_codes" %></span>
        <% end %>
      </td>
      <td><%= image_tag "icons/arrow.png", :class => "to", :title => "Send to room" %></td>
      <td><%=h notification.room.name %></td>
      <td class="actions">
        <%= link_to "Edit", edit_notification_path(notification), :class => "button neutral icon update" %>
        <%= link_to "Remove", notification_path(notification), :class => "button negative icon remove", :method => :delete %>
      </td>
    </tr>
  <% end %>
  </table>
</div>

<% content_for :sidebar do %>
  <div id="actions">
    <%= link_to "Add a feed", new_notification_path, :title => "Add a notification", :class => "button add" %>
  </div>
<% end %>